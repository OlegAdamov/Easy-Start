{"mappings":"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","sources":["src/js/modal_main.js","src/js/localStorage/storage.js"],"sourcesContent":["import { createGalleryMarkup } from \"./gallery\";\nimport storageApi from './localStorage/storage';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst API_KEY = 'ba12bbb2efd4020faab2c5dd14dc19c0';\nconst refs = {\n    galleryRef: document.querySelector('.gallery'),\n\n    closeBtn: document.querySelector('[modal-close-btn]'),\n    backdrop: document.querySelector('.backdrop'),\n    modalContainer: document.querySelector('.modal-container')\n}\nrefs.galleryRef.addEventListener('click', onGalleryClick)\n\n\nfunction onGalleryClick(e) {\n  e.preventDefault()\n  const isMovieCard = e.target.closest('.gallery__item');\n  if (!isMovieCard) {\n    return;\n  }\n  refs.galleryRef.addEventListener('keydown', e => {\n    if (e.key === 'Escape') {\n      refs.backdrop.classList.add('is-hidden');\n    }\n  });\n  openModal(isMovieCard.id) \n}\n\n\n\nasync function fetchDesr (movieId) {\n  const response = await fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=en-US`)\n  const descriptionFilm = await response.json();\n  return descriptionFilm;\n}\nfunction openModal(movie) {\n  fetchDesr(movie).then(film=> {\n    refs.modalContainer.innerHTML = `\n    \n    <div class=\"modal-img\">\n    <img src=\"https://image.tmdb.org/t/p/w500${film.poster_path}\" alt=\"${film.title} ${film.name}\" class=\"image\" />\n  </div>\n  <div class=\"modal-rest\">\n  <h3 class=\"modal-title\">${film.title}</h3>\n      <div class=\"modal-info\">\n        <div class=\"modal-description\">\n          <p class=\"info-item\">Vote / Votes</p>\n          <p class=\"info-item\">Popularity</p>\n          <p class=\"info-item\">Original Title</p>\n          <p class=\"info-item\">Genre</p>\n        </div>\n        <div class=\"modal-count\">\n          <p class=\"count\" id=\"vote\">${film.vote_average}</p>\n          <p class=\"count\">${film.popularity}</p>\n          <p class=\"count\">${film.original_title}</p>\n          <p class=\"count\" id=\"genre\">Western</p>\n        </div>\n        </div>\n        <p class=\"about\">About</p>\n        <p class=\"about-info\">${film.overview}\n        </p>\n        </div>`\n  })\n  refs.backdrop.classList.remove('is-hidden');\n}\n\nwindow.addEventListener('click', e => {\n  if (e.target === refs.backdrop) {\n    refs.backdrop.classList.add('is-hidden');\n  }\n});\nconst addWatched = document.querySelector('.add-to-watch');\nconst addQueued = document.querySelector('.add-to-queue');\nconst filmTitle = document.querySelector('.modal-title');\nconst filmGenre = document.querySelector('#genre');\nconst filmPoster = document.querySelector('.image');\nconst filmVote = document.querySelector('#vote');\nconst WATCHED_KEY = 'watched-films-list';\nconst QUEUED_KEY = 'queued-films-list';\n\n// function checkInStorage(data, key) {\n//   const savedData = storageApi.load(key);\n//   for (const el of savedData) {\n//     if (JSON.stringify(el) === JSON.stringify(data)) {\n//       return true;\n//     }\n//   }\n\n//   return false;\n// }\n\naddWatched.addEventListener('click', () => {\n  const tempData = {\n    title: filmTitle.textContent,\n    poster: filmPoster.getAttribute('src'),\n    genre: filmGenre.textContent,\n    vote: filmVote.textContent.split(' / ')[0],\n  };\n  if (!storageApi.load(WATCHED_KEY)) {\n    storageApi.save(WATCHED_KEY, [tempData]);\n    Notify.info('Added to Watched');\n    return;\n  }\n\n  const savedData = storageApi.load(WATCHED_KEY);\n  for (const el of savedData) {\n    if (JSON.stringify(el) === JSON.stringify(tempData)) {\n      Notify.info('Film is already in Watched');\n      return;\n    }\n  }\n  savedData.push(tempData);\n  storageApi.save(WATCHED_KEY, savedData);\n  Notify.info('Added to Watched');\n});\n\naddQueued.addEventListener('click', () => {\n  const tempData = {\n    title: filmTitle.textContent,\n    poster: filmPoster.getAttribute('src'),\n    genre: filmGenre.textContent,\n    vote: filmVote.textContent.split(' / ')[0],\n  };\n  if (!storageApi.load(QUEUED_KEY)) {\n    storageApi.save(QUEUED_KEY, [tempData]);\n    Notify.info('Added to Queue');\n    return;\n  }\n\n  const savedData = storageApi.load(QUEUED_KEY);\n  for (const el of savedData) {\n    if (JSON.stringify(el) === JSON.stringify(tempData)) {\n      Notify.info('Film is already in Queue');\n      return;\n    }\n  }\n  savedData.push(tempData);\n  storageApi.save(QUEUED_KEY, savedData);\n  Notify.info('Added to Queue');\n});\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n};\n"],"names":["parcelRequire","$432cbc11a41faefe$export$2e2bcd8739ae039","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","$f453593e604122c1$var$refs","galleryRef","document","querySelector","closeBtn","backdrop","modalContainer","addEventListener","e","preventDefault","isMovieCard","target","closest","classList","add","movie","id","async","movieId","response","fetch","json","$f453593e604122c1$var$fetchDesr","then","film","innerHTML","poster_path","title","name","vote_average","popularity","original_title","overview","remove","window","$f453593e604122c1$var$addWatched","$f453593e604122c1$var$addQueued","$f453593e604122c1$var$filmTitle","$f453593e604122c1$var$filmGenre","$f453593e604122c1$var$filmPoster","$f453593e604122c1$var$filmVote","$f453593e604122c1$var$WATCHED_KEY","$f453593e604122c1$var$QUEUED_KEY","tempData","textContent","poster","getAttribute","genre","vote","split","load","save","$hVKDR","Notify","info","savedData","el","push"],"version":3,"file":"index.f655ca66.js.map"}