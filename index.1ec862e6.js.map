{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAAUC,SAASC,cAAc,YACjCC,EAASF,SAASC,cAAc,WAChCE,EAAUH,SAASC,cAAc,YACjCG,EAAgBJ,SAASC,cAAc,mBACvCI,EAAaL,SAASC,cAAc,gBACpCK,EAAWN,SAASC,cAAc,cAClCM,EAAUP,SAASC,cAAc,iBACjCO,EAAaR,SAASC,cAAc,oBAGpCQ,GAFcT,SAASC,cAAc,iBAEf,IAC1BS,KAAKC,MAAMC,aAAaC,QAAQ,wBAC5BC,EAAoB,IACxBJ,KAAKC,MAAMC,aAAaC,QAAQ,sBAC5BE,EAAc,IAA6C,OAAvCf,SAASC,cAAc,YAgDjD,SAASe,EAAkBC,GACzB,MAAMC,EAASD,EACZE,KAAIC,IAAiB,EAAAvB,EAAAwB,SAAaD,KAClCE,KAAK,IACJP,KACFhB,EAAQwB,UAAYL,EACpBhB,EAAOqB,UAAY,OAEnBxB,EAAQwB,UAAY,KACpBrB,EAAOqB,UAAYL,GAErBf,EAAQoB,UAAY,KACpBC,EAAAC,WAAWC,gBAAgB,YAAa,oBACxCF,EAAAC,WAAWE,GAAG,YAAaC,E,CA3D7BvB,EAAWwB,iBAAiB,SAAS,KACnC1B,EAAQoB,UAAY,KACpBnB,EAAcmB,UAAY,KAC1BC,EAAAC,WAAWK,MAAMrB,IAAsBsB,QACvCf,EACEgB,EACEvB,IACAe,EAAAC,WAAWQ,SAASC,aACpB,IAGJ5B,EAAS6B,UAAUC,OAAO,sBAC1B/B,EAAW8B,UAAUE,IAAI,qBAAqB,IAGhD/B,EAASuB,iBAAiB,SAAS,KACjC1B,EAAQoB,UAAY,KACpBnB,EAAcmB,UAAY,KAC1BC,EAAAC,WAAWK,MAAMhB,IAAoBiB,QACrCf,EACEgB,EACElB,IACAU,EAAAC,WAAWQ,SAASC,aACpB,IAGJ7B,EAAW8B,UAAUC,OAAO,sBAC5B9B,EAAS6B,UAAUE,IAAI,qBAAqB,IAE9C9B,EAAQsB,iBAAiB,SAAS,KAChCS,SAASC,QAAQ,IAEnB/B,EAAWqB,iBAAiB,SAAS,KACnCxB,EAAW8B,UAAUE,IAAI,sBACzB/B,EAAS6B,UAAUC,OAAO,sBAC1BjC,EAAQoB,UAAY,KACpBnB,EAAcmB,UAAY,KAC1BC,EAAAC,WAAWK,MAAMrB,IAAsBsB,QACvCf,EACEgB,EACEvB,IACAe,EAAAC,WAAWQ,SAASC,aACpB,GAEH,IAiBH,MAAMF,EAAuB,CAACQ,EAAOC,EAAWC,IACvCF,EAAMG,OAAOD,EAAc,GAAKD,EAAWC,EAAcD,GAElE,SAASb,EAAYgB,GACnB,IACE,IAAIC,EAEFA,EADE9B,IACeN,IAEAK,IAEnB,MAAMG,EAASe,EACba,EACArB,EAAAC,WAAWQ,SAASC,aACpBV,EAAAC,WAAWqB,kBAETD,EAAed,SAAWP,EAAAC,WAAWQ,SAASc,aAChDC,QAAQC,IAAI,iCAAkCzB,EAAAC,WAAWK,OACzDN,EAAAC,WAAWK,MAAMe,EAAed,SAElCiB,QAAQC,IAAI,2BAA4BzB,EAAAC,YACxCuB,QAAQC,IAAI,+BAAgCJ,GAC5C7B,EAAkBC,EAAQF,I,CAC1B,MAAOmC,GACPF,QAAQC,IAAIC,GACZC,OAAOC,QAAQF,EAAMG,K,CAEvBC,OAAOC,SAAS,EAAE,E","sources":["src/js/library_rend.js"],"sourcesContent":["import moviesMurkup from '../templates/movi-card.hbs';\nimport { pagination } from './pagination';\n\nconst watched = document.querySelector('.watched');\nconst queued = document.querySelector('.queued');\nconst gallery = document.querySelector('.gallery');\nconst sliderWrapper = document.querySelector('.slider-wrapper');\nconst watchedBtn = document.querySelector('#btn_watched');\nconst queueBtn = document.querySelector('#btn_queue');\nconst homeBtn = document.querySelector('#activ-homeJs');\nconst libraryBtn = document.querySelector('#activ-libraryJs');\nconst galleryItem = document.querySelector('gallery__item');\n\nconst localStorageWatched = () =>\n  JSON.parse(localStorage.getItem('watched-films-list'));\nconst localStorageQueue = () =>\n  JSON.parse(localStorage.getItem('queued-films-list'));\nconst isWatchList = () => document.querySelector('.watched') !== null;\n\nwatchedBtn.addEventListener('click', () => {\n  gallery.innerHTML = null;\n  sliderWrapper.innerHTML = null;\n  pagination.reset(localStorageWatched().length);\n  createLibraryCard(\n    paginateLocalStorage(\n      localStorageWatched(),\n      pagination._options.itemsPerPage,\n      1\n    )\n  );\n  queueBtn.classList.remove('btn_library_active');\n  watchedBtn.classList.add('btn_library_active');\n});\n\nqueueBtn.addEventListener('click', () => {\n  gallery.innerHTML = null;\n  sliderWrapper.innerHTML = null;\n  pagination.reset(localStorageQueue().length);\n  createLibraryCard(\n    paginateLocalStorage(\n      localStorageQueue(),\n      pagination._options.itemsPerPage,\n      1\n    )\n  );\n  watchedBtn.classList.remove('btn_library_active');\n  queueBtn.classList.add('btn_library_active');\n});\nhomeBtn.addEventListener('click', () => {\n  location.reload();\n});\nlibraryBtn.addEventListener('click', () => {\n  watchedBtn.classList.add('btn_library_active');\n  queueBtn.classList.remove('btn_library_active');\n  gallery.innerHTML = null;\n  sliderWrapper.innerHTML = null;\n  pagination.reset(localStorageWatched().length);\n  createLibraryCard(\n    paginateLocalStorage(\n      localStorageWatched(),\n      pagination._options.itemsPerPage,\n      1\n    )\n  );\n});\nfunction createLibraryCard(movies) {\n  const markup = movies\n    .map(watched_queue => moviesMurkup(watched_queue))\n    .join('');\n  if (isWatchList()) {\n    watched.innerHTML = markup;\n    queued.innerHTML = null;\n  } else {\n    watched.innerHTML = null;\n    queued.innerHTML = markup;\n  };\n  gallery.innerHTML = null;\n  pagination._offByEventName('afterMove', 'getResponseMovie');\n  pagination.on('afterMove', getNextPage);\n};\nconst paginateLocalStorage = (array, page_size, page_number) => {\n  return array.slice((page_number - 1) * page_size, page_number * page_size);\n};\nfunction getNextPage(event) {\n  try {\n    let currentStorage;\n    if (isWatchList()) {\n      currentStorage = localStorageWatched();\n    } else {\n      currentStorage = localStorageQueue();\n    }\n    const movies = paginateLocalStorage(\n      currentStorage,\n      pagination._options.itemsPerPage,\n      pagination.getCurrentPage()\n    );\n    if (currentStorage.length !== pagination._options.totalItems) {\n      console.log('getNextPage ~ pagination.reset', pagination.reset);\n      pagination.reset(currentStorage.length);\n    }\n    console.log('getNextPage ~ pagination', pagination);\n    console.log('getNextPage ~ currentStorage', currentStorage);\n    createLibraryCard(movies, isWatchList());\n  } catch (error) {\n    console.log(error);\n    Notify.failure(error.name);\n  };\n  window.scrollTo(0,0)\n};\n\n"],"names":["$d6GLQ","parcelRequire","$8cd6564c98ec01ea$var$watched","document","querySelector","$8cd6564c98ec01ea$var$queued","$8cd6564c98ec01ea$var$gallery","$8cd6564c98ec01ea$var$sliderWrapper","$8cd6564c98ec01ea$var$watchedBtn","$8cd6564c98ec01ea$var$queueBtn","$8cd6564c98ec01ea$var$homeBtn","$8cd6564c98ec01ea$var$libraryBtn","$8cd6564c98ec01ea$var$localStorageWatched","JSON","parse","localStorage","getItem","$8cd6564c98ec01ea$var$localStorageQueue","$8cd6564c98ec01ea$var$isWatchList","$8cd6564c98ec01ea$var$createLibraryCard","movies","markup","map","watched_queue","default","join","innerHTML","$2nhTy","pagination","_offByEventName","on","$8cd6564c98ec01ea$var$getNextPage","addEventListener","reset","length","$8cd6564c98ec01ea$var$paginateLocalStorage","_options","itemsPerPage","classList","remove","add","location","reload","array","page_size","page_number","slice","event","currentStorage","getCurrentPage","totalItems","console","log","error","Notify","failure","name","window","scrollTo"],"version":3,"file":"index.1ec862e6.js.map"}